#!/usr/bin/env bash
# SketchyBar â€” Atomic theme main config

PLUGIN_DIR="$CONFIG_DIR/sketchybar/plugins"
ITEM_DIR="$CONFIG_DIR/sketchybar/items"
COLOR_DIR="$CONFIG_DIR/sketchybar/colors"

# Load current theme colors (symlinked by theme-switch or default to atomic)
if [ -f "$COLOR_DIR/current.sh" ]; then
  source "$COLOR_DIR/current.sh"
else
  source "$COLOR_DIR/atomic.sh"
fi

# Bar properties (matching Waybar: top, height 36, margin 8, transparent bg)
sketchybar --bar \
  position=top \
  height=36 \
  margin=8 \
  y_offset=4 \
  color=0x00000000 \
  shadow=off \
  sticky=on \
  topmost=off \
  notch_width=200

# Default item styling (shared pill style from waybar/style.css)
sketchybar --default \
  padding_left=4 \
  padding_right=4 \
  icon.font="JetBrains Mono Nerd Font:Bold:13.0" \
  icon.color=$TEXT \
  icon.padding_left=8 \
  icon.padding_right=4 \
  label.font="JetBrains Mono Nerd Font:Regular:13.0" \
  label.color=$TEXT \
  label.padding_left=4 \
  label.padding_right=8 \
  background.color=$PILL_BG \
  background.border_color=$PILL_BORDER \
  background.border_width=1 \
  background.corner_radius=12 \
  background.height=28

# Register aerospace workspace change event
sketchybar --add event aerospace_workspace_change

# Source item configs
source "$ITEM_DIR/system_left.sh"
source "$ITEM_DIR/workspaces.sh"
source "$ITEM_DIR/system_right.sh"

# Force initial update
sketchybar --update
